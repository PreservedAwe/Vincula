<main class="d-flex flex-nowrap vh-100">
  <%= render "shared/sidebar" %>
  <div class="flex-column border border-dashed text-center h-100 w-100">
    <h1 class="mt-5 mb-3">Direct Messages</h1>
    <!-- Chat container -->
    <div class="chat-container border rounded p-3" data-controller="maintain-messages" data-maintain-messages-room-id="<%= @room.id %>" data-maintain-messages-target="messages">
      <% @room.messages.each do |message| %>
        <div class="chat-message">
          <strong><%= message.user.username %>:</strong> <%= message.body %>
        </div>
      <% end %>
      <!-- Chat messages -->
    </div>
    <!-- Message input form -->
    <form class="mt-3" action="/send_message" method="post" data-controller="reset-form" data-action="submit->reset-form#submit" data-reset-form-target="form">
      
      <div class="mb-3">
        <label for="messageInput" class="form-label"><%= @room.id %>></label>
        <textarea class="form-control" id="messageInput" name="message" rows="3"></textarea>
        <input type="hidden" name="room" value="<%= @room.id %>">
        <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
      </div>
      <button type="submit" class="btn btn-primary">Send Message</button>
    </form>
  </div>
</main>